<div class="item card white-text" style="height: 100%">
    <div id="slideshower">
       <img class="top" src="" alt="Image">
       <img class="buttom right" src="" alt="Image">
   </div>
</div>

<style type="text/css">
#slideshow {
    height: 100%;
}

#slideshower img {
    max-width: 100%;
    max-height: 100%;
    min-width: 300px;
    min-height: 300px;
    position:absolute;
    left:0;
    top: 0%;
    -webkit-transition: all 4s ease-in-out;
    /*-webkit-transition: left 5s;*/
    /*-webkit-transition: opacity 2s ease-in-out;
    -moz-transition: opacity 2s ease-in-out;
    -o-transition: opacity 2s ease-in-out;
    transition: opacity 2s ease-in-out*/
}

#slideshower img.top{
    width: 100%;
    height: 100%;
    z-index: 1;
    opacity: 1;
    /*-webkit-transform: scale(1) translate(0, 0);*/
}

#slideshower img.buttom {
    z-index: 0;
    opacity: 1;
    width: 10%;
    height: 10%;
    top: 25%;
}

#slideshower img.left {
    left: -120%;
    /*-webkit-transform: translate(-100%, 0);*/
}
#slideshower img.right {
    left: 120%;
    /*-webkit-transform: translate(100%, 0);*/
}


</style>
<script>
var waitTime = 6000;
var transitionTime = 6000;
var loadTime = 3000;
function get_image_url(callback){
    $.ajax({
        type: 'GET',
        url: '{{ context.references.random_image[0].address }}',
        success: function(res){
            callback(res);
        },
        error: function(err){
            console.log(err);
            callback(null);
        }
    });
}

function set_image(url, callback){
    var btm = $('#slideshower .buttom');
    btm[0].src = url;
    btm.attr('class', 'buttom right');

    transition(callback);
}

function transition(callback){
    setTimeout(function(){
        var buttom = $('#slideshower .buttom');
        var top = $('#slideshower .top');
        buttom.attr('class', 'top');
        top.attr('class', 'buttom left');
        setTimeout(function(){
            $('#slideshower .buttom')[0].src = "";
            setTimeout(function(){
                callback()
            }, waitTime);
        }, transitionTime); // transition time
    },loadTime); // load image time
}

function slideshower_recursion(){
    get_image_url(function(url){
        if(url != null){
            set_image(url, function(){
                slideshower_recursion();
            });
        }else{
            slideshower_recursion();
        }
    });
}

$(function(){
    slideshower_recursion();
});
</script>
