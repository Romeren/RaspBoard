<script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>

<h1 id="test" style="color: white; font-size: 60px;">This is a test</h1>

<script>
window.onload = function() {
      window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();

      castReceiverManager.onReady = function(event) {
        window.castReceiverManager.setApplicationState('Reciever ready...');
      };
      // messages on a custom namespace
      var ns = 'urn:x-cast:dashboard.com.framework';
      window.messageBus = window.castReceiverManager.getCastMessageBus(ns);

      var player = {
            mState:null,
            editTracksInfo: function(data){
                console.log('editTracksInfo'+data);
            },
            getDurationSec: function(){
                console.log('getDurationSec');
                return 120;
            },
            getState: function(){
                var state =  'PLAYING';
                console.log('getState '+state);
                return state;
            },
            getVolume: function(){
                var volume = new cast.receiver.media.Volume();
                console.log('getVolume '+volume);
                return volume;
            },
            load: function(contentId, autoplay, opt_time, opt_tracksInfo, opt_onlyLoadTracks){
                console.log('load '+contentId+' autoplay: '+autoplay);
            },
            pause: function(){
                console.log('pause');
            },
            play: function(){
                console.log('play');
            },
            mEndedCallback:null,
            registerEndedCallback: function(endedCallback){
                console.log('registerEndedCallback(endedCallback)');
            },
            mErrorCallback:null,
            registerErrorCallback: function(errorCallback){
                console.log('registerErrorCallback(errorCallback)');
            },
            mLoadCallback:null,
            registerLoadCallback: function(loadCallback){
                console.log('registerLoadCallback(loadCallback)');
            },
            reset: function(){
                console.log('reset');
            },
            seek: function(){
                console.log('seek');
            },
            setVolume: function(volume){
                console.log('setVolume '+volume);
            },
            unregisterEndedCallback: function(){
                console.log('unregisterEndedCallback');
            },
            unregisterErrorCallback: function(){
                console.log('unregisterErrorCallback');
            },
            unregisterLoadCallback: function(){
                console.log('unregisterLoadCallback');
            },
            init: function(){
                console.log('INIT');
            }
        }
      window.player = playser;
      window.meadiaManager = new cast.receiver.MediaManager(player);


      window.messageBus.onMessage = function(e) {
        // var msg = JSON.parse(e.data);
        $('#test').text(e.data);

        // if(msg.hasOwnProperty('url')){
            // window.location = msg.url;
        // }


        //document.getElementById('test').innerHTML = e.data;
        //window.messageBus.send(e.senderId, 'ok')
      };
      // initialize CastReceiverManager
      window.castReceiverManager.start({statusText: 'Reciever starting...'});
};
</script>
